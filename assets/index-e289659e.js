import{d as le,r as y,s as te,D as re,o as ie,b as m,c as S,k as t,t as h,e as o,w as c,F as T,H as ue,P as se,l as oe,f as g,g as x,h as ne,i as C,m as ce,G as pe,__tla as ge}from"./index-d2e32ea4.js";import{a as de,__tla as ve}from"./product-api-3f222760.js";import{W as J,__tla as ye}from"./index-9e36fdd6.js";import{_ as fe}from"./_plugin-vue_export-helper-c27b6911.js";let O,he=Promise.all([(()=>{try{return ge}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return ye}catch{}})()]).then(async()=>{const k={class:"search-filter"},E={class:"search-filter-criteria"},q={class:"search-filter-criteria-input"},H={class:"search-filter-criteria-select"},$={class:"search-filter-criteria-button"},A={class:"search-card"},R={class:"search-result-list"},j={class:"search-result-list-card"},I=["onClick"],K={style:{padding:"14px"}},B=["onClick"],F={class:"bottom"},G={style:{"font-size":"16px","font-weight":"bolder"}},D={style:{color:"rgba(0, 0, 0, 0.45)"}},M={class:"search-card"},W=le({__name:"index",setup(me){const _=y([]),z=i=>{window.open("/#/detail?guid="+i)},l=y({currentPage:1,pageSize:20,total:0}),b=y(),v=y({type:[],categories:[]}),V=async()=>{v.value.type=J.prdTypeList,v.value.categories=J.prdCategoriesList.filter(i=>i.productTypes!=null&&i.productTypes!="")};ue();const Q=te(()=>d.value&&d.value!=""?d.value:r.value.filterLabelType&&r.value.filterLabelType.length>0?r.value.filterLabelType.join(","):r.value.filterLabelCategory&&r.value.filterLabelCategory.length>0?r.value.filterLabelCategory.join(","):""),d=y(""),r=y({filterValueType:[],filterLabelType:[],filterValueCategory:[],filterLabelCategory:[]}),p=y({}),f=async()=>{p.value.pageNum=l.value.currentPage,p.value.pageSize=l.value.pageSize,p.value.sortBy=b.value;const i=await de(p.value);_.value=i.list,l.value.total=i.total,_.value.forEach(e=>{let u=9999999;e.pricingList.forEach(s=>{u>s.listPrice&&(u=new Number(s.listPrice).toFixed(2))}),u<9999999&&(e.pricing=u)})},X=()=>{let i={};if(d.value&&d.value!=""&&(i.search=d.value),r.value.filterValueType&&r.value.filterValueType.length>0){let e=[];r.value.filterValueType.forEach(u=>{let s=v.value.type.find(n=>n.code==u);s&&e.push(s.displayName)}),i.type=e.join(",")}if(r.value.filterValueCategory&&r.value.filterValueCategory.length>0){let e=[];r.value.filterValueCategory.forEach(u=>{let s=v.value.categories.find(n=>n.code==u);s&&e.push(s.displayName)}),i.categories=e.join(",")}w.push({name:se.SEARCH_PAGE_NAME,query:i})},w=oe();return re(()=>w.currentRoute.value,async i=>{if(p.value.searchKey="",i.query.search&&(p.value.searchKey=i.query.search,d.value=i.query.search),p.value.filterValueType=null,r.value.filterLabelType=[],r.value.filterValueType=[],i.query.type){let e=decodeURIComponent(i.query.type),u=[];await V();let s=v.value.type.find(n=>n.displayName.toUpperCase()==e.toUpperCase());s&&u.push(s.code),r.value.filterLabelType=JSON.parse(JSON.stringify([e])),r.value.filterValueType=JSON.parse(JSON.stringify(u)),p.value.filterValueType=JSON.parse(JSON.stringify(u))}if(p.value.filterValueCategory=null,r.value.filterValueCategory=[],r.value.filterLabelCategory=[],i.query.categories){let e=decodeURIComponent(i.query.categories).split(","),u=[];await V(),e.forEach(s=>{let n=v.value.categories.find(N=>N.displayName.toUpperCase()==s.toUpperCase());n&&u.push(n.code)}),r.value.filterLabelCategory=JSON.parse(JSON.stringify(e)),r.value.filterValueCategory=JSON.parse(JSON.stringify(u)),p.value.filterValueCategory=JSON.parse(JSON.stringify(u))}await f()},{immediate:!0}),ie(async()=>{await V()}),(i,e)=>{const u=g("el-input"),s=g("el-option"),n=g("el-select"),N=g("el-button"),L=g("el-pagination"),P=g("el-card"),Y=g("Picture"),Z=g("el-icon"),ee=g("el-image"),ae=g("el-tooltip");return m(),S(T,null,[t("div",k,[t("h1",null,"Search - "+h(Q.value),1),t("div",E,[t("div",q,[o(u,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),placeholder:"Keywords",size:"large"},null,8,["modelValue"])]),t("div",H,[o(n,{placeholder:"Select Categories",modelValue:r.value.filterValueType,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.filterValueType=a),clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",style:{width:"100%"},size:"large"},{default:c(()=>[(m(!0),S(T,null,x(v.value.type,a=>(m(),ne(s,{key:a.code,label:a.displayName,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",$,[o(N,{type:"primary",size:"large",onClick:X},{default:c(()=>[C("SEARCH")]),_:1})])])]),o(P,null,{default:c(()=>[t("div",A,[t("div",null,[t("span",null,h(`Showing ${(l.value.currentPage-1)*l.value.pageSize+1} to ${l.value.currentPage*l.value.pageSize} of ${l.value.total}`),1)]),t("div",null,[o(L,{"current-page":l.value.currentPage,"onUpdate:currentPage":e[2]||(e[2]=a=>l.value.currentPage=a),"page-size":l.value.pageSize,"onUpdate:pageSize":e[3]||(e[3]=a=>l.value.pageSize=a),"page-sizes":[10,20,30,40,50],background:"",size:"large",layout:"prev, pager, next, sizes",total:l.value.total,onSizeChange:f,onCurrentChange:f},null,8,["current-page","page-size","total"])]),t("div",null,[C(" Sort By: "),o(n,{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=a=>b.value=a),style:{width:"160px"},size:"default",placeholder:"Select Sort By",onChange:f,clearable:""},{default:c(()=>[o(s,{value:"PriceLowToHigh"},{default:c(()=>[C("Price: Low to High")]),_:1}),o(s,{value:"PriceHighToLow"},{default:c(()=>[C("Price: High to Low")]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),o(P,{shadow:"never","body-style":{padding:"10px"},style:{"margin-bottom":"20px","margin-top":"20px"}},{default:c(()=>[t("div",R,[(m(!0),S(T,null,x(_.value,a=>(m(),S("div",j,[o(ee,{class:"search-result-list-card-image",onClick:U=>z(a.guid),fit:"contain",src:ce(pe)(a.imageKeyThumb)},{error:c(()=>[t("div",{class:"image-slot",onClick:U=>z(a.guid)},[o(Z,null,{default:c(()=>[o(Y)]),_:1})],8,I)]),_:2},1032,["onClick","src"]),t("div",K,[o(ae,{content:a.productName},{default:c(()=>[t("span",{onClick:U=>z(a.guid),style:{cursor:"pointer","font-size":"14px",color:"#999"}},h(a.productName),9,B)]),_:2},1032,["content"]),t("div",F,[t("span",G,"As Low As: $"+h(a.pricing),1)]),t("div",null,[C(" Item #: "),t("span",D,h(a==null?void 0:a.productNumber),1)])])]))),256))])]),_:1}),o(P,null,{default:c(()=>[t("div",M,[t("div",null,[t("span",null,h(`Showing ${(l.value.currentPage-1)*l.value.pageSize+1} to ${l.value.currentPage*l.value.pageSize} of ${l.value.total}`),1)]),t("div",null,[o(L,{"current-page":l.value.currentPage,"onUpdate:currentPage":e[5]||(e[5]=a=>l.value.currentPage=a),"page-size":l.value.pageSize,"onUpdate:pageSize":e[6]||(e[6]=a=>l.value.pageSize=a),"page-sizes":[10,20,30,40,50],background:"",size:"large",layout:"prev, pager, next",total:l.value.total,onSizeChange:f,onCurrentChange:f},null,8,["current-page","page-size","total"])])])]),_:1})],64)}}});O=fe(W,[["__scopeId","data-v-dae54471"]])});export{he as __tla,O as default};
